---
title: "Daily Reports"

output:
  flexdashboard::flex_dashboard
    # theme: 
    #   version: 4
    #   bootswatch: flatly
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, out.width = "100%")
# knitr::opts_chunk$set(
#   cache = FALSE, cache.lazy = FALSE, autodep = TRUE, warning = FALSE, 
#   message = FALSE, echo = TRUE, dpi = 180,
#   fig.width = 5, fig.height = 3, echo = FALSE
#   )
```

<!--#general comments===========================================================
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
# This is [[insert description here - what it does/solve]]
#
# By: mike gaunt, michael.gaunt@wsp.com
#
# README: [[insert brief readme here]]
#-------- [[insert brief readme here]]
#
# *please use 80 character margins
# *please go to https://pkgs.rstudio.com/flexdashboard/articles/layouts.html
# to explore the different layouts available for the flexdashboard framework
#
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!--#library set-up=============================================================
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#content in this section should be removed if in production - ok for dev -->
```{r echo=FALSE, message=F}
library(gauntlet)
library(here)
library(tidyverse)
library(lubridate)
library(data.table)
library(reactable)
library(crosstalk)
library(htmltools)
library(reactable)
library(bosFunctions)

```

<!--#source helpers/utilities===================================================
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#content in this section should be removed if in production - ok for dev -->
```{r}
table_height = 500
```

<!--#source data================================================================
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#content in this section should be removed if in production - ok for dev 
#area to upload data with and to perform initial munging
#please add test data here so that others may use/unit test these scripts -->
```{js}
function filter_default(){
  document.getElementById("id_acct_type").getElementsByClassName("selectized")[0].selectize.setValue("All",false) 
  document.getElementById("id_metric_acct").getElementsByClassName("selectized")[0].selectize.setValue("Acct Count",false) 
  document.getElementById("id_acct_status").getElementsByClassName("selectized")[0].selectize.setValue(["Active", "Pending Close"],false)
  document.getElementById("id_acct_status_wd").getElementsByClassName("selectized")[0].selectize.setValue(["Active", "Pending Close"],false) 
}
    
$(document).ready(filter_default);
```


Accounts Creation 
================================================================================ 

Row {.tabset .tabset-fade}
--------------------------------------------------------------------------------

### By Account Type 
```{r}
table_accts_type(
      file = here("data", "data_account_creation.csv")
      ,id = "data_acct_type"
      ,height = table_height)
```

### Month Agg.
```{r}
table_accts_type_wd(
      file = here("data", "data_account_creation.csv")
      ,id = "data_acct_type_wd"
      ,height = table_height)
```

Accounts Cycle Day 
================================================================================ 

Row {.tabset .tabset-fade}
--------------------------------------------------------------------------------

### Agg. by Cycle Day {#week-agg}
```{r}
table_accts_cycleDay(
      file = here("data", "data_acct_cycle_day_summary.csv")
      ,id = "data_accts_cycleDay"
      ,height = table_height)
```

### Agg by Account Status {#daily-agg}
```{r}
table_accts_cycleDay_wd(
                    file = here("data", "data_acct_cycle_day_summary.csv")
                    ,id = "data_accts_cycleDay_wd"
                    ,height = table_height)
```

Pass Fulfillment
================================================================================ 

Row {.tabset .tabset-fade}
--------------------------------------------------------------------------------

### By Year/Month
```{r}
table_pss_flfllmnt(
  file = here("data", "data_pass_fulfillment.csv")
  ,id = "data_pass_fulfillment"
  ,height = table_height)
```

Daily Posting Summary 
================================================================================ 

Row {.tabset .tabset-fade}
--------------------------------------------------------------------------------

### By Posting Date 
```{r}
table_trp_pstng_smmry_by_pstngdt(
                file = here("data", "data_trip_posting_summary.csv")
                ,id = "data_trp_pstng_smmry_by_pstngdt"
                ,height = table_height)

```

### By Trip Date 
```{r}
table_trp_pstng_smmry_by_trpdt(
                file = here("data", "data_trip_posting_summary.csv")
                ,id = "data_trp_pstng_smmry_by_trpdt"
                ,height = table_height)
```

<style>
.container-fluid.crosstalk-bscols {
    margin-left: 30px;
    margin-right: 30px;
    white-space: normal
}

body>.container-fluid.crosstalk-bscols {
    margin-left: auto;
    margin-right: auto
}

.crosstalk-input-checkboxgroup .crosstalk-options-group .crosstalk-options-column {
    display: inline-block;
    padding-right: 12px;
    vertical-align: top
}

@media only screen and (max-width: 480px) {
    .crosstalk-input-checkboxgroup .crosstalk-options-group .crosstalk-options-column {
        display:block;
        padding-right: inherit
    }
}

.crosstalk-input {
    margin-bottom: 15px
}

.crosstalk-input .control-label {
    margin-bottom: 0;
    vertical-align: middle
}

.crosstalk-input input[type="checkbox"] {
    margin: 4px 0 0;
    margin-top: 1px;
    line-height: normal
}

.crosstalk-input .checkbox {
    position: relative;
    display: block;
    margin-top: 10px;
    margin-bottom: 10px
}

.crosstalk-input .checkbox>label {
    padding-left: 20px;
    margin-bottom: 0;
    font-weight: 400;
    cursor: pointer
}

.crosstalk-input .checkbox input[type="checkbox"],.crosstalk-input .checkbox-inline input[type="checkbox"] {
    position: absolute;
    margin-top: 2px;
    margin-left: -20px
}

.crosstalk-input .checkbox+.checkbox {
    margin-top: -5px
}

.crosstalk-input .checkbox-inline {
    position: relative;
    display: inline-block;
    padding-left: 20px;
    margin-bottom: 0;
    font-weight: 400;
    vertical-align: middle;
    cursor: pointer
}

.crosstalk-input .checkbox-inline+.checkbox-inline {
    margin-top: 0;
    margin-left: 10px
}

</style>





















